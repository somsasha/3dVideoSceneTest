System.register("chunks:///_virtual/main",["./ThingsController.ts","./ThingsCreator.ts"],(function(){"use strict";return{setters:[null,null],execute:function(){}}}));

System.register("chunks:///_virtual/ThingsController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,e,n,o,r,a,l,c,s,u,h,T,g,p,v,w,f,y,d;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,l=t.Camera,c=t.CCFloat,s=t.Node,u=t.input,h=t.Input,T=t.geometry,g=t.PhysicsSystem,p=t.MobilityMode,v=t.RigidBody,w=t.Vec3,f=t.Tween,y=t.easing,d=t.Component}],execute:function(){var b,A,m,P,z,C,D,R,S,L,E,k,x,_,F,M,O;r._RF.push({},"3e61e+Pbe5NAJ3VdGkddPmh","ThingsController",void 0);var B=a.ccclass,H=a.property;t("ThingsController",(b=B("ThingsController"),A=H(l),m=H(c),P=H(s),z=H(s),C=H(s),D=H(s),R=H(c),b((E=i((L=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return i=t.call.apply(t,[this].concat(r))||this,n(i,"camera",E,o(i)),n(i,"tapDuration",k,o(i)),n(i,"wallLeft",x,o(i)),n(i,"wallRight",_,o(i)),n(i,"wallFront",F,o(i)),n(i,"wallBack",M,o(i)),n(i,"wallsTreashold",O,o(i)),i.currentActiveThing=null,i.currentActiveThingDistance=0,i.currentActiveThingStartPosition=new w,i.currentActiveThingTapPositionDelta=new w,i.currantActiveThingTapTime=0,i}e(i,t);var r=i.prototype;return r.onLoad=function(){var t=this;u.on(h.EventType.TOUCH_START,this.onTouchStart,this),u.on(h.EventType.TOUCH_END,this.onTouchEnd,this),u.on(h.EventType.TOUCH_MOVE,this.onTouchMove,this),window.setSize=function(i,e,n,o){void 0===n&&(n=0),void 0===o&&(o=0),t.wallLeft.setPosition(i/2+n,t.wallLeft.position.y,t.wallLeft.position.z),t.wallLeft.setPosition(-i/2+n,t.wallRight.position.y,t.wallRight.position.z),t.wallFront.setPosition(t.wallFront.position.x,t.wallFront.position.y,e/2-o),t.wallBack.setPosition(t.wallBack.position.x,t.wallBack.position.y,-e/2-o)}},r.onDestroy=function(){u.off(h.EventType.TOUCH_START,this.onTouchStart,this),u.off(h.EventType.TOUCH_END,this.onTouchEnd,this),u.off(h.EventType.TOUCH_MOVE,this.onTouchMove,this)},r.onTouchStart=function(t){var i=new T.Ray;this.camera.screenPointToRay(t.getLocationX(),t.getLocationY(),i);if(g.instance.raycast(i,4294967295,1e7,!0)){var e=g.instance.raycastResults,n=null;e.sort((function(t,i){return t.distance-i.distance}));for(var o=0;o<e.length;o++){var r,a;if(null!=(r=e[o])&&null!=(a=r.collider)&&a.node&&e[o].collider.node.mobility===p.Movable){n=e[o];break}}if(!n)return;var l=n.collider.node;this.currentActiveThing=l,this.currentActiveThingDistance=n.distance,this.currentActiveThingStartPosition=this.currentActiveThing.getWorldPosition(),this.currentActiveThingTapPositionDelta=this.currentActiveThingStartPosition.clone().subtract(n.hitPoint),this.currentActiveThing.getComponent(v).isKinematic=!0,this.currentActiveThing.getComponent(v).allowSleep=!1,this.currentActiveThing.getComponent(v).wakeUp(),this.currantActiveThingTapTime=Date.now(),console.log(this.currentActiveThing)}},r.onTouchMove=function(t){if(this.currentActiveThing){var i=new T.Ray;this.camera.screenPointToRay(t.getLocationX(),t.getLocationY(),i);var e=new w;i.computeHit(e,this.currentActiveThingDistance),e=e.add(this.currentActiveThingTapPositionDelta);var n=this.wallRight.getPosition().x-this.wallsTreashold,o=this.wallLeft.getPosition().x+this.wallsTreashold,r=this.wallFront.getPosition().z-this.wallsTreashold,a=this.wallBack.getPosition().z+this.wallsTreashold;e.x>n&&(e.x=n),e.x<o&&(e.x=o),e.z>r&&(e.z=r),e.z<a&&(e.z=a),this.currentActiveThing.setWorldPosition(e.x,this.currentActiveThingStartPosition.y,e.z)}},r.onTouchEnd=function(){if(this.currentActiveThing&&(this.currentActiveThing.getComponent(v).isKinematic=!1,this.currentActiveThing.getComponent(v).allowSleep=!0,Date.now()<=this.currantActiveThingTapTime+this.tapDuration)){var t=this.currentActiveThing;t.mobility=p.Static,new f(t).to(.15,{scale:new w(.9,.9,.9)},{easing:y.cubicIn}).to(.15,{scale:new w(1,1,1)},{easing:y.cubicOut}).call((function(){t.destroy()})).start()}this.currentActiveThing=null},i}(d)).prototype,"camera",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=i(L.prototype,"tapDuration",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),x=i(L.prototype,"wallLeft",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=i(L.prototype,"wallRight",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=i(L.prototype,"wallFront",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=i(L.prototype,"wallBack",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=i(L.prototype,"wallsTreashold",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),S=L))||S));r._RF.pop()}}}));

System.register("chunks:///_virtual/ThingsCreator.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var t,e,r,i,a,o,s,u,c,l,h,p,f,g;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.initializerDefineProperty,r=n.inheritsLoose,i=n.assertThisInitialized},function(n){a=n.cclegacy,o=n._decorator,s=n.Prefab,u=n.CCInteger,c=n.Node,l=n.CCFloat,h=n.instantiate,p=n.RigidBody,f=n.Vec3,g=n.Component}],execute:function(){var b,w,d,m,T,y,v,D,C,I,z,P,M,R,F,S,_,L,j,x;a._RF.push({},"12184tZ3C5MjIeU9OsExf59","ThingsCreator",void 0);var B=o.ccclass,O=o.property,k=n("ThingData",(b=B("ThingData"),w=O(s),d=O(u),b((y=t((T=function(){e(this,"prefab",y,this),e(this,"count",v,this)}).prototype,"prefab",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(T.prototype,"count",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=T))||m));n("ThingsCreator",(D=B("ThingsCreator"),C=O(k),I=O(c),z=O(l),P=O(l),M=O(l),D((S=t((F=function(n){function t(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return t=n.call.apply(n,[this].concat(a))||this,e(t,"things",S,i(t)),e(t,"spawnPoint",_,i(t)),e(t,"spawnRadius",L,i(t)),e(t,"spawnDelay",j,i(t)),e(t,"spawnImpuls",x,i(t)),t.currentThingsData=[],t.currentThings=[],t}r(t,n);var a=t.prototype;return a.onLoad=function(){var n=this;this.createScene(),window.resetScene=function(){n.reset()},window.setCount=function(t,e){n.setThingCount(t,e)}},a.reset=function(){for(var n=0;n<this.currentThings.length;n++)this.currentThings[n]&&this.currentThings[n].destroy();this.createScene()},a.setThingCount=function(n,t){for(var e=0;e<this.things.length;e++)if(this.things[e].prefab.name===n)return void(this.things[e].count=t);console.warn("Invalid prefab name")},a.createScene=function(){for(var n=this,t=0;t<this.things.length;t++){var e=this.things[t];if(!(e.count<=0)){var r=new k;r.prefab=e.prefab,r.count=e.count,this.currentThingsData.push(r)}}for(var i=0,a=function(){var t=n.randomInt(0,n.currentThingsData.length-1),e=n.currentThingsData[t].prefab,r=n.spawnPoint.getPosition().clone();r.add3f(n.randomFloat(0,n.spawnRadius/2),0,n.randomFloat(0,n.spawnRadius/2)),n.scheduleOnce((function(){n.spawn(e,r)}),n.spawnDelay*i),i+=1,n.currentThingsData[t].count-=1,n.currentThingsData[t].count<=0&&n.currentThingsData.splice(t,1)};this.currentThingsData.length>0;)a()},a.spawn=function(n,t){var e=h(n);e.setParent(this.node),e.setPosition(t),e.getComponent(p).applyImpulse(new f(0,this.spawnImpuls,0)),this.currentThings.push(e)},a.randomInt=function(n,t){return n=Math.ceil(n),t=Math.floor(t),Math.floor(Math.random()*(t-n+1))+n},a.randomFloat=function(n,t){return Math.random()*(t-n)+n},t}(g)).prototype,"things",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_=t(F.prototype,"spawnPoint",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(F.prototype,"spawnRadius",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),j=t(F.prototype,"spawnDelay",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),x=t(F.prototype,"spawnImpuls",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-25}}),R=F))||R));a._RF.pop()}}}));
