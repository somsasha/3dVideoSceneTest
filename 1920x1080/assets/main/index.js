System.register("chunks:///_virtual/main",["./ThingsController.ts","./ThingsCreator.ts"],(function(){"use strict";return{setters:[null,null],execute:function(){}}}));

System.register("chunks:///_virtual/ThingsController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,e,n,r,o,a,c,l,s,h,u,T,g,p,v,f,w;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,c=t.Camera,l=t.CCFloat,s=t.Node,h=t.input,u=t.Input,T=t.geometry,g=t.PhysicsSystem,p=t.MobilityMode,v=t.RigidBody,f=t.Vec3,w=t.Component}],execute:function(){var y,d,A,m,b,C,P,D,z,E,R,S,L,_,M,x,H;o._RF.push({},"3e61e+Pbe5NAJ3VdGkddPmh","ThingsController",void 0);var O=a.ccclass,U=a.property;t("ThingsController",(y=O("ThingsController"),d=U(c),A=U(l),m=U(s),b=U(s),C=U(s),P=U(s),D=U(l),y((R=i((E=function(t){function i(){for(var i,e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return i=t.call.apply(t,[this].concat(o))||this,n(i,"camera",R,r(i)),n(i,"tapDuration",S,r(i)),n(i,"wallLeft",L,r(i)),n(i,"wallRight",_,r(i)),n(i,"wallFront",M,r(i)),n(i,"wallBack",x,r(i)),n(i,"wallsTreashold",H,r(i)),i.currentActiveThing=null,i.currentActiveThingDistance=0,i.currentActiveThingStartPosition=new f,i.currentActiveThingTapPositionDelta=new f,i.currantActiveThingTapTime=0,i}e(i,t);var o=i.prototype;return o.onLoad=function(){h.on(u.EventType.TOUCH_START,this.onTouchStart,this),h.on(u.EventType.TOUCH_END,this.onTouchEnd,this),h.on(u.EventType.TOUCH_MOVE,this.onTouchMove,this)},o.onDestroy=function(){h.off(u.EventType.TOUCH_START,this.onTouchStart,this),h.off(u.EventType.TOUCH_END,this.onTouchEnd,this),h.off(u.EventType.TOUCH_MOVE,this.onTouchMove,this)},o.onTouchStart=function(t){var i=new T.Ray;this.camera.screenPointToRay(t.getLocationX(),t.getLocationY(),i);if(g.instance.raycastClosest(i,4294967295,1e7,!0)){var e=g.instance.raycastClosestResult,n=e.collider,r=n.node;r&&r.mobility===p.Movable&&(this.currentActiveThing=n.node,this.currentActiveThingDistance=e.distance,this.currentActiveThingStartPosition=this.currentActiveThing.getWorldPosition(),this.currentActiveThingTapPositionDelta=this.currentActiveThingStartPosition.clone().subtract(e.hitPoint),this.currentActiveThing.getComponent(v).isKinematic=!0,this.currentActiveThing.getComponent(v).allowSleep=!1,this.currentActiveThing.getComponent(v).wakeUp(),this.currantActiveThingTapTime=Date.now(),console.log(this.currentActiveThing))}},o.onTouchMove=function(t){if(this.currentActiveThing){var i=new T.Ray;this.camera.screenPointToRay(t.getLocationX(),t.getLocationY(),i);var e=new f;i.computeHit(e,this.currentActiveThingDistance),e=e.add(this.currentActiveThingTapPositionDelta);var n=this.wallRight.getPosition().x-this.wallsTreashold,r=this.wallLeft.getPosition().x+this.wallsTreashold,o=this.wallFront.getPosition().z-this.wallsTreashold,a=this.wallBack.getPosition().z+this.wallsTreashold;e.x>n&&(e.x=n),e.x<r&&(e.x=r),e.z>o&&(e.z=o),e.z<a&&(e.z=a),this.currentActiveThing.setWorldPosition(e.x,this.currentActiveThingStartPosition.y,e.z)}},o.onTouchEnd=function(){this.currentActiveThing&&(this.currentActiveThing.getComponent(v).isKinematic=!1,this.currentActiveThing.getComponent(v).allowSleep=!0,Date.now()<=this.currantActiveThingTapTime+this.tapDuration&&this.currentActiveThing.destroy()),this.currentActiveThing=null},i}(w)).prototype,"camera",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=i(E.prototype,"tapDuration",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),L=i(E.prototype,"wallLeft",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=i(E.prototype,"wallRight",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=i(E.prototype,"wallFront",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=i(E.prototype,"wallBack",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=i(E.prototype,"wallsTreashold",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),z=E))||z));o._RF.pop()}}}));

System.register("chunks:///_virtual/ThingsCreator.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var t,e,r,i,a,o,s,u,l,c,p,h,f,g;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.initializerDefineProperty,r=n.inheritsLoose,i=n.assertThisInitialized},function(n){a=n.cclegacy,o=n._decorator,s=n.Prefab,u=n.CCInteger,l=n.Node,c=n.CCFloat,p=n.instantiate,h=n.RigidBody,f=n.Vec3,g=n.Component}],execute:function(){var b,w,d,m,y,T,v,C,z,I,P,D,M,R,F,_,L,j,x,B;a._RF.push({},"12184tZ3C5MjIeU9OsExf59","ThingsCreator",void 0);var O=o.ccclass,k=o.property,A=n("ThingData",(b=O("ThingData"),w=k(s),d=k(u),b((T=t((y=function(){e(this,"prefab",T,this),e(this,"count",v,this)}).prototype,"prefab",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(y.prototype,"count",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=y))||m));n("ThingsCreator",(C=O("ThingsCreator"),z=k(A),I=k(l),P=k(c),D=k(c),M=k(c),C((_=t((F=function(n){function t(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return t=n.call.apply(n,[this].concat(a))||this,e(t,"things",_,i(t)),e(t,"spawnPoint",L,i(t)),e(t,"spawnRadius",j,i(t)),e(t,"spawnDelay",x,i(t)),e(t,"spawnImpuls",B,i(t)),t.currentThings=[],t}r(t,n);var a=t.prototype;return a.onLoad=function(){for(var n=this,t=0;t<this.things.length;t++){var e=this.things[t];if(!(e.count<=0)){var r=new A;r.prefab=e.prefab,r.count=e.count,this.currentThings.push(r)}}for(var i=0,a=function(){var t=n.randomInt(0,n.currentThings.length-1),e=n.currentThings[t].prefab,r=n.spawnPoint.getPosition().clone();r.add3f(n.randomFloat(0,n.spawnRadius/2),0,n.randomFloat(0,n.spawnRadius/2)),n.scheduleOnce((function(){n.spawn(e,r)}),n.spawnDelay*i),i+=1,n.currentThings[t].count-=1,n.currentThings[t].count<=0&&n.currentThings.splice(t,1)};this.currentThings.length>0;)a()},a.spawn=function(n,t){var e=p(n);e.setParent(this.node),e.setPosition(t),e.getComponent(h).applyImpulse(new f(0,this.spawnImpuls,0))},a.randomInt=function(n,t){return n=Math.ceil(n),t=Math.floor(t),Math.floor(Math.random()*(t-n+1))+n},a.randomFloat=function(n,t){return Math.random()*(t-n)+n},t}(g)).prototype,"things",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=t(F.prototype,"spawnPoint",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(F.prototype,"spawnRadius",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),x=t(F.prototype,"spawnDelay",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),B=t(F.prototype,"spawnImpuls",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-25}}),R=F))||R));a._RF.pop()}}}));
