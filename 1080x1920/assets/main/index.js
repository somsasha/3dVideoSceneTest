System.register("chunks:///_virtual/main",["./ThingsController.ts","./ThingsCreator.ts"],(function(){"use strict";return{setters:[null,null],execute:function(){}}}));

System.register("chunks:///_virtual/ThingsController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,n,e,o,r,a,c,l,s,u,h,T,w,d,p,g,m,v,f;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,c=t.Camera,l=t.CCFloat,s=t.Node,u=t.input,h=t.Input,T=t.geometry,w=t.PhysicsSystem,d=t.MobilityMode,p=t.RigidBody,g=t.Vec3,m=t.Tween,v=t.easing,f=t.Component}],execute:function(){var A,y,b,S,P,C,D,R,z,E,L,_,k,x,M,O,F;r._RF.push({},"3e61e+Pbe5NAJ3VdGkddPmh","ThingsController",void 0);var H=a.ccclass,B=a.property;t("ThingsController",(A=H("ThingsController"),y=B(c),b=B(l),S=B(s),P=B(s),C=B(s),D=B(s),R=B(l),A((L=i((E=function(t){function i(){for(var i,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return i=t.call.apply(t,[this].concat(r))||this,e(i,"camera",L,o(i)),e(i,"tapDuration",_,o(i)),e(i,"wallLeft",k,o(i)),e(i,"wallRight",x,o(i)),e(i,"wallFront",M,o(i)),e(i,"wallBack",O,o(i)),e(i,"wallsTreashold",F,o(i)),i.currentActiveThing=null,i.currentActiveThingDistance=0,i.currentActiveThingStartPosition=new g,i.currentActiveThingTapPositionDelta=new g,i.currantActiveThingTapTime=0,i}n(i,t);var r=i.prototype;return r.onLoad=function(){var t=this;window.destructionAnimation={maxScale:1.1,increaseTime:.15,minScale:0,decreaseTime:.15},u.on(h.EventType.TOUCH_START,this.onTouchStart,this),u.on(h.EventType.TOUCH_END,this.onTouchEnd,this),u.on(h.EventType.TOUCH_MOVE,this.onTouchMove,this),window.setSize=function(i,n,e,o){void 0===e&&(e=0),void 0===o&&(o=0),t.wallLeft.setPosition(i/2+e,t.wallLeft.position.y,t.wallLeft.position.z),t.wallLeft.setPosition(-i/2+e,t.wallRight.position.y,t.wallRight.position.z),t.wallFront.setPosition(t.wallFront.position.x,t.wallFront.position.y,n/2-o),t.wallBack.setPosition(t.wallBack.position.x,t.wallBack.position.y,-n/2-o)},window.setDestructionAnimation=function(t,i,n,e){window.destructionAnimation.maxScale=t,window.destructionAnimation.increaseTime=i,window.destructionAnimation.minScale=n,window.destructionAnimation.decreaseTime=e}},r.onDestroy=function(){u.off(h.EventType.TOUCH_START,this.onTouchStart,this),u.off(h.EventType.TOUCH_END,this.onTouchEnd,this),u.off(h.EventType.TOUCH_MOVE,this.onTouchMove,this)},r.onTouchStart=function(t){var i=new T.Ray;this.camera.screenPointToRay(t.getLocationX(),t.getLocationY(),i);if(w.instance.raycast(i,4294967295,1e7,!0)){var n=w.instance.raycastResults,e=null;n.sort((function(t,i){return t.distance-i.distance}));for(var o=0;o<n.length;o++){var r,a;if(null!=(r=n[o])&&null!=(a=r.collider)&&a.node&&n[o].collider.node.mobility===d.Movable){e=n[o];break}}if(!e)return;var c=e.collider.node;this.currentActiveThing=c,this.currentActiveThingDistance=e.distance,this.currentActiveThingStartPosition=this.currentActiveThing.getWorldPosition(),this.currentActiveThingTapPositionDelta=this.currentActiveThingStartPosition.clone().subtract(e.hitPoint),this.currentActiveThing.getComponent(p).isKinematic=!0,this.currentActiveThing.getComponent(p).allowSleep=!1,this.currentActiveThing.getComponent(p).wakeUp(),this.currantActiveThingTapTime=Date.now()}},r.onTouchMove=function(t){if(this.currentActiveThing){var i=new T.Ray;this.camera.screenPointToRay(t.getLocationX(),t.getLocationY(),i);var n=new g;i.computeHit(n,this.currentActiveThingDistance),n=n.add(this.currentActiveThingTapPositionDelta),this.currentActiveThing.setWorldPosition(n.x,this.currentActiveThingStartPosition.y,n.z)}},r.onTouchEnd=function(){if(this.currentActiveThing&&(this.currentActiveThing.getComponent(p).isKinematic=!1,this.currentActiveThing.getComponent(p).allowSleep=!0,Date.now()<=this.currantActiveThingTapTime+this.tapDuration)){var t=this.currentActiveThing;t.mobility=d.Static,new m(t).to(window.destructionAnimation.increaseTime,{scale:new g(window.destructionAnimation.maxScale,window.destructionAnimation.maxScale,window.destructionAnimation.maxScale)},{easing:v.cubicOut}).to(window.destructionAnimation.decreaseTime,{scale:new g(window.destructionAnimation.minScale,window.destructionAnimation.minScale,window.destructionAnimation.minScale)},{easing:v.cubicIn}).call((function(){t.destroy()})).start()}this.currentActiveThing=null},i}(f)).prototype,"camera",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=i(E.prototype,"tapDuration",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),k=i(E.prototype,"wallLeft",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=i(E.prototype,"wallRight",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=i(E.prototype,"wallFront",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=i(E.prototype,"wallBack",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=i(E.prototype,"wallsTreashold",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),z=E))||z));r._RF.pop()}}}));

System.register("chunks:///_virtual/ThingsCreator.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var t,e,r,i,a,o,s,u,c,l,h,p,f,g;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.initializerDefineProperty,r=n.inheritsLoose,i=n.assertThisInitialized},function(n){a=n.cclegacy,o=n._decorator,s=n.Prefab,u=n.CCInteger,c=n.Node,l=n.CCFloat,h=n.instantiate,p=n.RigidBody,f=n.Vec3,g=n.Component}],execute:function(){var b,w,d,m,T,y,v,D,C,I,z,P,M,R,F,S,_,L,j,x;a._RF.push({},"12184tZ3C5MjIeU9OsExf59","ThingsCreator",void 0);var B=o.ccclass,O=o.property,k=n("ThingData",(b=B("ThingData"),w=O(s),d=O(u),b((y=t((T=function(){e(this,"prefab",y,this),e(this,"count",v,this)}).prototype,"prefab",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(T.prototype,"count",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=T))||m));n("ThingsCreator",(D=B("ThingsCreator"),C=O(k),I=O(c),z=O(l),P=O(l),M=O(l),D((S=t((F=function(n){function t(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return t=n.call.apply(n,[this].concat(a))||this,e(t,"things",S,i(t)),e(t,"spawnPoint",_,i(t)),e(t,"spawnRadius",L,i(t)),e(t,"spawnDelay",j,i(t)),e(t,"spawnImpuls",x,i(t)),t.currentThingsData=[],t.currentThings=[],t}r(t,n);var a=t.prototype;return a.onLoad=function(){var n=this;this.createScene(),window.resetScene=function(){n.reset()},window.setCount=function(t,e){n.setThingCount(t,e)}},a.reset=function(){for(var n=0;n<this.currentThings.length;n++)this.currentThings[n]&&this.currentThings[n].destroy();this.createScene()},a.setThingCount=function(n,t){for(var e=0;e<this.things.length;e++)if(this.things[e].prefab.name===n)return void(this.things[e].count=t);console.warn("Invalid prefab name")},a.createScene=function(){for(var n=this,t=0;t<this.things.length;t++){var e=this.things[t];if(!(e.count<=0)){var r=new k;r.prefab=e.prefab,r.count=e.count,this.currentThingsData.push(r)}}for(var i=0,a=function(){var t=n.randomInt(0,n.currentThingsData.length-1),e=n.currentThingsData[t].prefab,r=n.spawnPoint.getPosition().clone();r.add3f(n.randomFloat(0,n.spawnRadius/2),0,n.randomFloat(0,n.spawnRadius/2)),n.scheduleOnce((function(){n.spawn(e,r)}),n.spawnDelay*i),i+=1,n.currentThingsData[t].count-=1,n.currentThingsData[t].count<=0&&n.currentThingsData.splice(t,1)};this.currentThingsData.length>0;)a()},a.spawn=function(n,t){var e=h(n);e.setParent(this.node),e.setPosition(t),e.getComponent(p).applyImpulse(new f(0,this.spawnImpuls,0)),this.currentThings.push(e)},a.randomInt=function(n,t){return n=Math.ceil(n),t=Math.floor(t),Math.floor(Math.random()*(t-n+1))+n},a.randomFloat=function(n,t){return Math.random()*(t-n)+n},t}(g)).prototype,"things",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_=t(F.prototype,"spawnPoint",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(F.prototype,"spawnRadius",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),j=t(F.prototype,"spawnDelay",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),x=t(F.prototype,"spawnImpuls",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-25}}),R=F))||R));a._RF.pop()}}}));
